import{a as u}from"./chunk-7LJBHI36.js";import{a as i,b as h,c as d,j as f,m as l}from"./chunk-KXOE7I45.js";var g="http://localhost:3000",S=(()=>{class o{constructor(){this.globalState=l(u)}_fetch(I){return d(this,arguments,function*(t,e={}){this.globalState.isLoading.set(!0);let a=localStorage.getItem("angular-ecommerce-token"),n=new Headers(e.headers||{});a&&n.set("Authorization",`Bearer ${a}`),e.body instanceof FormData||n.set("Content-Type","application/json");try{let r=yield fetch(`${g}${t}`,h(i({},e),{headers:n})),c=r.headers.get("content-type");if(c&&c.indexOf("application/json")!==-1){let s=yield r.json();if(!r.ok)throw new Error(s.message||s.error||"Erro na API.");return s}else{if(!r.ok)throw new Error("Erro na API.");return{}}}catch(r){throw console.error(`Erro na API em ${t}:`,r),r}finally{this.globalState.isLoading.set(!1)}})}login(t,e){return this._fetch("/login",{method:"POST",body:JSON.stringify({email:t,password:e})})}register(t){return this._fetch("/register",{method:"POST",body:JSON.stringify(t)})}getProducts(){return this._fetch("/products")}getProduct(t){return this._fetch(`/products/${t}`)}addProduct(t){return this._fetch("/products",{method:"POST",body:t})}updateProduct(t,e){return this._fetch(`/products/${t}`,{method:"PUT",body:e})}deleteProduct(t){return this._fetch(`/products/${t}`,{method:"DELETE"})}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=f({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{S as a};
