import{a as V}from"./chunk-24UUDT7J.js";import{c as N,d as R,f as q,i as D}from"./chunk-FU5XF3DT.js";import{a as T}from"./chunk-7LJBHI36.js";import{B as x,D as v,F as f,G as g,H as C,K as n,L as o,M as m,N as h,O as _,P as c,T as M,U as l,V as d,W as b,aa as w,ka as k,m as y,n as S,pa as E,r as s,s as p,sa as I,w as P,y as t}from"./chunk-KXOE7I45.js";function Q(i,u){if(i&1){let e=h();n(0,"form",9,0),_("ngSubmit",function(){s(e);let r=c(2);return p(r.processPayment())}),n(2,"div",10)(3,"label",11),l(4),o(),n(5,"input",12),_("input",function(r){s(e);let F=c(2);return p(F.formatCardNumber(r))}),o()(),n(6,"div",10)(7,"label",11),l(8),o(),m(9,"input",13),o(),n(10,"div",14)(11,"div",15)(12,"label",11),l(13),o(),m(14,"input",16),o(),n(15,"div",15)(16,"label",11),l(17),o(),m(18,"input",17),o()(),n(19,"div",18)(20,"button",19),l(21),o()()()}if(i&2){let e=M(1),a=c(2);t(4),d(a.t("cardNumber")),t(),f("value",a.cardNumber()),t(3),d(a.t("cardHolder")),t(5),d(a.t("expiryDate")),t(4),d(a.t("cvv")),t(3),f("disabled",e.invalid),t(),d(a.t("payNow"))}}function A(i,u){if(i&1&&(n(0,"div",20),m(1,"img",26),o()),i&2){let e=c(3);t(),f("src",e.pixQRCode(),P)}}function L(i,u){if(i&1&&(n(0,"span"),m(1,"i",27),l(2),o()),i&2){let e=c(3);t(2),b(" ",e.t("copyCode"),"")}}function O(i,u){if(i&1&&(n(0,"span"),m(1,"i",28),l(2),o()),i&2){let e=c(3);t(2),b(" ",e.t("codeCopied"),"")}}function z(i,u){if(i&1){let e=h();n(0,"div",2)(1,"h5"),l(2),o(),v(3,A,2,1,"div",20),n(4,"p"),l(5),o(),n(6,"div",21),m(7,"input",22),n(8,"button",23),_("click",function(){s(e);let r=c(2);return p(r.copyPixCode())}),v(9,L,3,1,"span")(10,O,3,1,"span"),o()(),n(11,"div",24)(12,"button",25),_("click",function(){s(e);let r=c(2);return p(r.processPayment())}),l(13),o()()()}if(i&2){let e=c(2);t(2),d(e.t("scanQRCode")),t(),C(e.pixQRCode()?3:-1),t(2),d(e.t("orCopyCode")),t(2),f("value",e.pixCode()),t(2),C(e.showCopiedMessage()?10:9),t(4),d(e.t("payNow"))}}function G(i,u){if(i&1){let e=h();n(0,"h2",3),l(1),o(),n(2,"ul",4)(3,"li",5)(4,"a",6),_("click",function(){s(e);let r=c();return p(r.selectPaymentMethod("card"))}),m(5,"i",7),l(6),o()(),n(7,"li",5)(8,"a",6),_("click",function(){s(e);let r=c();return p(r.selectPaymentMethod("pix"))}),m(9,"i",8),l(10),o()()(),v(11,Q,22,7,"form")(12,z,14,6,"div",2)}if(i&2){let e=c();t(),d(e.t("paymentGateway")),t(3),g("active",e.paymentMethod()==="card"),t(2),b("",e.t("creditCard")," "),t(2),g("active",e.paymentMethod()==="pix"),t(2),b("",e.t("pix")," "),t(),C(e.paymentMethod()==="card"?11:-1),t(),C(e.paymentMethod()==="pix"?12:-1)}}function U(i,u){if(i&1&&(n(0,"div",2),m(1,"i",29),n(2,"h3",30),l(3),o(),n(4,"a",31),l(5),o()()),i&2){let e=c();t(3),d(e.t("paymentSuccess")),t(2),d(e.t("backToHome"))}}var te=(()=>{class i{constructor(){this.paymentSuccess=x(!1),this.paymentMethod=x("card"),this.pixQRCode=x(""),this.pixCode=x(""),this.showCopiedMessage=x(!1),this.cardNumber=x(""),this.i18n=y(I),this.cart=y(V),this.globalState=y(T),this.t=e=>this.i18n.t(e)}selectPaymentMethod(e){this.paymentMethod.set(e),e==="pix"&&!this.pixCode()&&this.generatePix()}generatePix(){let e="00020126330014br.gov.bcb.pix0111"+Math.random().toString(36).substring(2,15)+"5204000053039865802BR5913"+Math.random().toString(36).substring(2,15).toUpperCase()+"6009BRASILIADF62070503***6304E4A7";this.pixCode.set(e),this.pixQRCode.set(`https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(e)}`)}formatCardNumber(e){let a=e.target,r=a.value.replace(/\D/g,"");r=r.replace(/(\d{4})(?=\d)/g,"$1 "),this.cardNumber.set(r.slice(0,19)),a.value=this.cardNumber()}copyPixCode(){navigator.clipboard.writeText(this.pixCode()).then(()=>{this.showCopiedMessage.set(!0),setTimeout(()=>this.showCopiedMessage.set(!1),2e3)})}processPayment(){this.globalState.isLoading.set(!0),setTimeout(()=>{this.paymentSuccess.set(!0),this.cart.clearCart(),this.globalState.isLoading.set(!1)},1500)}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-payment"]],standalone:!0,features:[w],decls:3,vars:1,consts:[["f","ngForm"],[1,"form-container"],[1,"text-center"],[1,"text-center","mb-4"],[1,"nav","nav-pills","nav-fill","mb-4"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"bi","bi-credit-card-fill","me-2"],[1,"bi","bi-qr-code","me-2"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","required","","placeholder","0000 0000 0000 0000",1,"form-control",3,"input","value"],["type","text","required","","placeholder","Nome Completo",1,"form-control"],[1,"row"],[1,"col-md-6","mb-3"],["type","text","required","","placeholder","MM/AA",1,"form-control"],["type","text","required","","placeholder","123",1,"form-control"],[1,"d-grid"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"qr-code-container","my-3"],[1,"input-group","mb-3"],["type","text","readonly","",1,"form-control",3,"value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"d-grid","mt-4"],[1,"btn","btn-success",3,"click"],["alt","PIX QR Code",3,"src"],[1,"bi","bi-clipboard"],[1,"bi","bi-check-lg"],[1,"bi","bi-check-circle-fill","text-success",2,"font-size","4rem"],[1,"mt-3"],["routerLink","/",1,"btn","btn-primary","mt-3"]],template:function(a,r){a&1&&(n(0,"div",1),v(1,G,13,9)(2,U,6,2,"div",2),o()),a&2&&(t(),C(r.paymentSuccess()?2:1))},dependencies:[k,E,D,q,N,R],styles:[".nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{cursor:pointer;color:#495057}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff}.qr-code-container[_ngcontent-%COMP%]{display:inline-block;padding:1rem;border:1px solid #dee2e6;border-radius:.375rem;background-color:#fff}"],changeDetection:0})}}return i})();export{te as PaymentComponent};
